<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiny Leagues Poker</title>
    
    <!-- Dynamic meta tags script - must be before the redirect script -->
    <script type="text/javascript">
      // Set the og:url meta tag dynamically based on the current URL
      var fullUrl = window.location.href;
      var metaOgUrl = document.createElement('meta');
      metaOgUrl.setAttribute('property', 'og:url');
      metaOgUrl.setAttribute('content', fullUrl);
      document.head.appendChild(metaOgUrl);
      
      // Check if this is a game page
      var pathParts = window.location.pathname.split('/');
      var isGamePage = pathParts.length >= 2 && 
                      pathParts[pathParts.length - 2] === 'games';
      
      if (isGamePage) {
        // Extract the game ID - it's the last part of the path
        var gameId = pathParts[pathParts.length - 1];
        
        // Create a more specific title for game pages
        var titleMeta = document.createElement('meta');
        titleMeta.setAttribute('property', 'og:title');
        titleMeta.setAttribute('content', 'Wanna play some poker?');
        document.head.appendChild(titleMeta);
        
        // Create a more specific description for game pages
        var descMeta = document.createElement('meta');
        descMeta.setAttribute('property', 'og:description');
        descMeta.setAttribute('content', 'Join this upcoming game over on Tiny Leagues');
        document.head.appendChild(descMeta);
      }
    </script>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Tiny Leagues Poker" />
    <meta property="og:title" content="Tiny Leagues Poker" />
    <meta property="og:description" content="Join a poker game on Tiny Leagues" />
    
    <!-- Image tags - critical for WhatsApp -->
    <meta property="og:image" content="https://tinyleagues.co/poker-icon.png" />
    <meta property="og:image:secure_url" content="https://tinyleagues.co/poker-icon.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://tinyleagues.co/poker-icon.png" />
    
    <!-- Additional schema.org markup for WhatsApp -->
    <meta itemprop="image" content="https://tinyleagues.co/poker-icon.png">
    
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages with custom domain
      // Modified from https://github.com/rafgraph/spa-github-pages
      
      // No need to keep path segments for a custom domain
      var pathSegmentsToKeep = 0;

      // Check if this is a direct navigation to a game page
      var pathParts = window.location.pathname.split('/');
      if (pathParts.length >= 3 && pathParts[1] === 'games') {
        // This is a direct navigation to a game page, don't use the SPA redirect
        // The React Router will handle this correctly
        var gameId = pathParts[2];
        window.location.replace(window.location.href);
      } else {
        // For other pages, use the standard SPA redirect
        var l = window.location;
        l.replace(
          l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
          l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + '/?/' +
          l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
          (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
          l.hash
        );
      }
    </script>
  </head>
  <body>
    <h1>Tiny Leagues Poker</h1>
    <p>Redirecting to the game...</p>
    <img src="/poker-icon.png" 
         alt="Poker icon" 
         style="width: 200px; height: 200px; margin-top: 20px; display: block; margin-left: auto; margin-right: auto;" />
  </body>
</html> 